**실험계획**

**Project 보고서**

**QR 코드 인식 정확도에 영향을 미치는 요인 분석**

![](media/image1.png){width="3.1109339457567806in"
height="2.701953193350831in"}

**\< 목차 \>**

**1) 실험 목적의 설정**

> 1.1) 주제 선정 배경
>
> 1.2) 프로젝트 목적

**2) 특성치 선택**

> 2.1) 특성치 - 인식 가능한 거리

**3) 인자 및 인자 수준 수 선택**

> 3.1) QR코드의 각도 별 (A)
>
> 3.2) QR코드의 밝기 별 (B)
>
> 3.3) 휴대폰 기종 별 (C)
>
> **4) 실험의 배치와 실험 순서의 랜덤화**
>
> 4.1) 실험 배치
>
> 4.2) 실험 순서의 랜덤화
>
> **5) 실험의 실시**
>
> 5.1) 실험 환경
>
> 5.2) 실험 순서
>
> 5.3) 실험결과
>
> **6) 데이터 분석**
>
> 6.1) ANOVA 분석
>
> 6.2) 점 추정 및 구간 추정

**7) 결론 및 제안**

**1) 실험 목적의 설정**

**1.1) 주제 선정 배경**

![](media/image2.png){width="3.401042213473316in"
height="0.5616404199475066in"}![](media/image3.png){width="6.686983814523185in"
height="1.4218175853018373in"}

QR코드는 최근 코로나의 확산으로 인한 QR코드 인증 때문에 우리에게 더욱
익숙해져 있다. 2010년대 후반부터 스마트폰의 성능이 좋아지면서 QR코드의
확산에 큰 영향을 미쳤고, 관련된 기술이 발전됨에 따라 마케팅, 제조업 등
많은 사업 분야에서 이용되고 있다. 추가적으로 금융사, 대중교통 승차권,
모바일 운전면허증, 대한민국 사전투표 투표용지, 복권 등 쓰일 수 있는
범위는 무궁무진하다.

이러한 QR코드는 인식률 부분에서 바코드에 비해 크게 개선한 결과이지만,
그럼에도 많은 사람들은 QR코드 인식 과정 중 불편함을 호소하고 있다.
기사에 따르면, 코로나19 이후 국내 QR코드 인증 횟수는 하루 평균 100만
건에 달한다. 코로나19 이후 QR코드 인증이 보편화된 지 1년 반의 기간이
지났지만, 아직까지도 QR코드 인증 15초 제한 시간 안에 인증을 하지 못하게
되는 불편함 때문에 방명록을 작성하거나 전화 인증으로 대체하는 시민들이
존재한다.

더욱 빠르고 정확한 QR코드 인증을 위해 자세한 연구와 분석을 진행하기
위해서는 BCH 알고리즘에 대한 연구가 선행되어야 한다. 따라서 우리는 이번
실험을 통해 QR코드의 각도 별, QR코드의 밝기 별, 휴대폰 기종 별로
인식률에 얼마나 영향을 주는지 파악하고, 어떤 요소를 개선해 QR코드를
만들어야 QR코드 인식에 대한 효율을 높일 수 있을까에 대해 분석해 보고자
한다.

**1.2) 프로젝트 목적**

이번 실험에서는 QR코드 인식 처리 성능에 영향을 미칠 것으로 추측되는 요소
(QR코드의 각도, QR코드의 밝기)를 선정하고 휴대폰 기종 별(A사, S사, L사)
차이를 인자로 추가해 실험을 진행하여 각 조건에서 가장 적합한 환경을
알아본다. 그리고 QR코드 인식에 방해가 되는 요소들을 취합하여, 개선해야
할 점을 제시하고 연구해야 할 새로운 방향을 제시하고자 한다.

**2) 특성치 선택**

**2.1) 특성치 - 인식 가능한 거리**

실험의 목적은 다양한 조건별 QR코드 인식에 미치는 영향을 분석하는 것이다.
이에 따라 각도별, 밝기별, 기종별로 조건을 선택해 각 상황 별로 QR코드를
인식시켰을 때 인식할 수 있는 최대 인식 거리를 측정하였고, 이를 특성치로
선정하였다. 측정된 값의 경우, 줄자로는 소숫점 첫째 자리까지 측정
가능하다.

**3) 인자 및 인자 수준 수 선택**

QR코드의 일반적인 활용과정은 QR코드의 모서리 중 3곳에 사각형의 코너
기호를 코드 스캐닝 시 위치 검출 패턴으로 이용하여 국지적 코드로
인식한다. 이러한 코드인식 기능은 광선, 이미지 혼선 및 각도, 카메라
자체의 성능에 민감하다.

이번 실험에서는 코드인식 기능에 영향을 미칠만한 3가지 인자를 설정하여
QR코드를 인식할수 있는 최대 거리에 미치는 요인을 분석하고자 했다.

**3.1) QR코드와의 각도(A)**

카메라 앵글의 특성상 정면에서 스캔하지 않고 비스듬한 각도에서 스캔을 할
경우 인식에 반응하는 픽셀 빈도수가 다르게 되므로 QR코드를 인식하는데
있어서 영향을 미치는 요소에는 각도가 있을 것이라고 생각했다. 카메라
앵글과 QR코드와의 각도를 서로 수평에 자리하면 0도라고 보고, 각도를
높여줄수록 인식에 반응하는 픽셀 빈도수가 낮아질 것이라 판단하여 A인자를
카메라와 QR코드와의 각도로 설정한 후, 0도(수평), 30도, 60도를 A인자의
3수준으로 설정하였다.

**3.2) QR코드의 밝기(B)**

스마트폰으로 QR코드를 스캔할 경우 빛이 얼마나 흡수, 반사되는가에 따라서
스캔이 잘 안 될수 있다. QR코드의 셀 패턴은 흑백 점과 흰색 여백을 통해
데이터가 저장된다. QR코드에 담긴 데이터 인식은 빛의 흡수와 반사를
감지하는 적외선 센서를 통해 이루어진다. QR코드의 검은색은 빛을 흡수하고,
흰색은 빛이 반사한다. 적외선 센서는 QR코드의 패턴을 인식하는 것이다.
무늬가 검은색이냐 흰색이냐에 따라서 컴퓨터 2진법 수로 표현되는 '0'과
'1'을 구분한다.

![](media/image4.png){width="6.267716535433071in"
height="3.0972222222222223in"}

QR코드를 인식하면서 흰 부분은 강한 빛으로 되돌아가는데, 해당 신호가
아날로그-디지털 변환기를 통과하면서 빛의 강약에 따라 '0'과 '1'로 구분된
전기 신호로 바뀌어 컴퓨터가 읽어내는 원리이다. 즉 QR코드 화면 자체의
밝기가 높을 경우 검은색과 흰색의 구분이 명확하게 잡히고 흰색의 빛 반사가
잘 이루어져 센서의 인식이 원활하다. 이에 따라 밝기를 낮춰주면 적외선
센서가 인식하게 될 때 검은색과 흰색의 경계가 상대적으로 애매해져
최대인식 거리가 줄어들 것이라 판단하였고 QR코드 화면의 밝기를 B인자로
채택 후 수준을 화면 밝기0%, 화면 밝기50%, 화면 밝기100%의 3수준으로
지정해주었다.

**3.3) 휴대폰 기종(C)**

![](media/image5.png){width="2.2239588801399823in"
height="2.53125in"}![](media/image6.png){width="2.1093755468066493in"
height="2.5416666666666665in"}![](media/image7.png){width="1.7916666666666667in"
height="2.5546773840769905in"}

QR코드를 인식할 수 있는 최대의 거리는 카메라의 성능이 서로 다를 수밖에
없는 기종에 따라 차이가 있을 것이라고 생각했다. 대부분의 스마트폰은
카메라의 개수가 같더라도 화각이 다를 것이라고 판단했고, 일반과 망원을
지원하는 스마트폰과 일반, 광각, 망원, LiDar을 모두 지원하는 스마트폰,
일반과 광곽을 지원하는 후면 카메라의 차이점에 의해 기종에 따른 질감과
장면 최적화, 색감과 선명도의 차이가 분명할 것이라 생각하여 휴대폰 기종을
C인자로 채택했다. 수준은 각각 LG스마트폰과 아이폰, 갤럭시로
지정해주었다. LG, 아이폰, 갤럭시 모두 전면 카메라는 1200만 화소로 같고,
LG는 일반과 망원을 지원하며, 아이폰은 일반과 광각, 망원 모두를 지원하고,
갤럭시는 일반과 광각을 지원하는 점에서 차이가 있다.

> **4) 실험의 배치와 실험 순서의 랜덤화**

**4.1) 실험 배치**

실험 계획에서 가장 중요한 기본 원리는 랜덤화의 원리이다. 각도, 밝기,
기종별로 최적의 조합을 찾기 위하여 각각의 수준별로 실험 순서의 랜덤화를
필수적으로 적용하고 실험을 시작했다.

A는 QR코드와 카메라와의 각도로 수준은 각각 0도(수평) 30도, 60도로
설정하여 수준 수는 3이다.

B는 QR코드 화면의 밝기로 수준은 각각 화면 밝기0%, 화면 밝기50%, 화면
밝기100%로 설정하여 수준 수는 3이다.

C는 화각이 서로 다른 스마트폰의 기종으로 수준은 각각 LG스마트폰, 아이폰,
갤럭시로 설정하여 수준 수는 3이다.

A와 B, C 각각 수준 수가 3, 3, 2인 반복이 있는 삼원배치법으로 설정하였다.

QR코드는 주변 빛의 흡수 반사량에 따라 인식되는 정도의 차이를 갖기 때문에
주변 빛을 조절할 필요가 있었다. 그래서 검은색의 큰 암막스크린으로
QR코드를 띄운 화면 근처를 둘러싸서 빛이 반사되는 영향을 최대한 줄이고자
했다. 빛의 조명도인 럭스(lux, 기호lx)의 정도는 화면 밝기 100%, 50%,
0%에서 각각 1044, 416, 143으로 측정이 되었다. 1044 lux는 일반적으로 인공
조명, 책상 스탠드, TV 스튜디오의 수준인 1000 lux와 비슷한 빛의 조명도를
가지며, 416 lux는 일반적으로 맑은 날의 해돋이 또는 해넘이의 수준인 400
lux와 비슷한 빛의 조명도를 갖고, 143 lux는 일반적으로 매우 어두운 낮
수준인 100 lux와 비슷한 빛의 조명도를 가진다.

**4.2) 실험 순서의 랜덤화**

추출된 인자 외에 기타 원인들의 영향으로 실험결과가 편향되는 것을 없애기
위해 실험계획의 기본원리중 랜덤화의 원리를 적용하였다.

단순 무작위 추출법을 사용했으며 이는 모집단에서 개체를 뽑을 때 각각의
개체가 모두 동등한 확률로 뽑히는 확률적 표본 추출 또는 무작위 표본
추출에 포함된다. 추출 단위로 얻을 수 있는 모든 부분집합이 선택될 확률이
서로 같게 된다.

C# 프로그래밍을 사용해 단순 무작위 추출법을 진행하였고 과정은 다음과
같다.

![](media/image8.png){width="6.270833333333333in"
height="3.152963692038495in"}

→ C# 프로그램 코드

![](media/image9.png){width="2.7708333333333335in"
height="4.6318733595800525in"}

→ 코드 실행에 의한 실험 순서 랜덤 추출

랜덤화한 순서는 다음과 같다.

![](media/image10.png){width="6.267716535433071in"
height="2.388888888888889in"}

**5) 실험의 실시**

**5.1) 실험 환경**

실험 시간 : 2021년 11월 27일

장소 : 제 2학생회관, 산업공학과 자치 공간

실험 환경 조성 : QR 코드는 주변 빛의 흡수 또는 반사량에 따라 인식 결과에
차이를 보일 수 있다. 실내에서 실험을 진행하더라도 창문으로 들어오는 빛의
양이나 각도 등이 실험 결과에 영향을 줄 수 있기 때문에 실내등 소등 후,
검은색 암막 스크린으로 QR 코드 화면 주위의 빛 반사 영향을 줄이고자 했다.

**5.2) 실험 순서**

-   'NAVER' 어플을 통해 인식할 QR 코드를 생성한다.

![](media/image11.png){width="1.5714402887139107in"
height="1.5714402887139107in"}

생성 된 QR 코드를 노트북(LG gram)을 이용하여 띄운 뒤, QR 코드와 측정
휴대폰과의 거리가 직선상에 놓일 수 있도록 실험한다.

-   QR 코드를 인식하는 휴대폰과 노트북 사이의 거리를 줄자로 측정하여
    기록한다.

-   빛의 영향을 줄이기 위해 모든 실내등을 소등 한 뒤, 암막 스크린으로
    창문에서 들어오는 외부 빛을 차단 한다.

-   각도는 휴대폰 각도기 어플(Protractor)을 통해 노트북이 직각을 이룰
    때를 기준으로 휴대폰과의 각도를 0으로 설정했다.

-   각도 (0,30,60) , 밝기 (0,50,100) , 휴대폰 기종 (LG, 아이폰, 갤럭시)
    별로 랜덤하게 실험을 진행한다.

**5.3) 실험결과**

![](media/image12.png){width="6.270833333333333in"
height="2.2732589676290464in"}

> **6) 데이터 분석**
>
> 6.1) ANOVA 분석

![](media/image13.png){width="6.270833333333333in"
height="3.0364588801399823in"}

실험 결과를 토대로 분산 분석한 결과이다. 각 인자 A(각도), B(밝기),
C(기종)의 P-value 값이 0.05보다 작게 나왔고 각 인자가 유의함을 알 수
있었다. 또한 교호작용 AxB(각도x밝기)의 P-value값이 0.05보다 작게 나와서
유의하다고 해석할 수 있었다. 이외 AxC(각도x기종), BxC(밝기x기종)
,AxBxC(각도x밝기x기종)의 P-value 값은 0.05보다 크게 나왔고 유의하지
않음을 확인할 수 있었다.

![](media/image14.png){width="5.84375in" height="3.1823458005249345in"}

인자 A(각도)에 대한 주효과를 분석한 그래프이다. QR코드 인식에 있어서
각도를 높일수록 인식 거리가 감소하는 추세를 보일 것으로 예상하였다.
그래프를 통해서 예상과 결과가 일치함을 알 수 있었다. 이때 0도와 30도의
경우 100이상의 최대 인식 거리를 평균으로 하지만 60도의 경우 95도 정도로
이전 두 각도에 비해서 최대 인식 거리 값이 저하됨을 알 수 있다. 이 이유는
각도를 조정할 경우 QR코드가 카메라에 담기지 않는 경우가 발생하거나
빛반사가 생김으로써 QR코드 인식에 방해가 생기기 때문이라고 해석해 볼 수
있었다.

![](media/image15.png){width="5.90625in" height="3.088053368328959in"}

인자 B(밝기)에 대한 주효과를 분석한 그래프이다. 실험 환경으로 암막
스크린을 활용하여 외부 빛을 최대한 차단한 상황에서 실험을 진행하였기에
밝기가 100일 때 최대 인식 거리가 가장 좋을 것으로 예상하였다. 실험을
해본 결과 위의 그래프를 통해서 밝기가 50일 때가 가장 좋은 최대 인식 거리
값을 가지고 있음을 확인할 수 있고 오히려 밝기가 100일 때의 값이 가장
좋지 못했다. 이러한 결과에 대해서 분석해 보았을 때 암막을 이용하여
전방의 주변 빛을 일부 차단하기 했지만 공간 특성상 다각도에서 빛이
들어오기 때문에 화면의 밝기가 너무 밝을 경우 주변 빛에 QR코드 인식
화면에 빛 반사가 생겨서 결과 값이 좋지 못한 것으로 해석할 수 있었다.

![](media/image16.png){width="5.854166666666667in"
height="3.02961176727909in"}

인자 C(기종)에 대한 주효과를 분석한 그래프이다. 실험에 사용한 세가지
기종의 휴대폰의 카메라 성능을 고려하였을 때 아이폰 \> 갤럭시 \> LG
순으로 최대 인식 거리 값이 좋을 것으로 예상하였다. 그래프를 통해서
확인할 수 있듯이 아이폰과 갤럭시의 경우 최대 인식 거리의 평균 값이
100이상임을 알 수 있고 LG의 경우 평균 값이 90정도임을 알 수 있다. 각
회사에서 제공하는 휴대폰 기본 성능을 토대로 예상한 결과와 동일하게
데이터 결과 값이 나왔다.

6.2) 점 추정 및 구간 추정

A,B,C 주효과와 2차 교호작용의 일부인 AxB가 유의하기 때문에 다음의 식을
통해서 점 추정 값을 구할 수 있다.

![](media/image17.png){width="1.6770833333333333in" height="0.25in"}

![](media/image18.png){width="6.267716535433071in"
height="1.7361111111111112in"}

AB2원표를 통해서 ![](media/image19.png){width="0.23958333333333334in"
height="0.23958333333333334in"}값(118.195)을 도출할 수 있다. 또한 주효과
C에 대해서 위의 주효과도와 그래프를 통해서 값(110.4733)을 도출할 수
있다.

따라서 점 추정 값은 ![](media/image20.png){width="0.84375in"
height="0.28125in"}118.195 + 110.4733 - 101.3622 = 127.3061이다.

최적조합은 ![](media/image21.png){width="0.5104166666666666in"
height="0.23958333333333334in"}임을 알 수 있다.

95% 신뢰구간(구간추정)은

![](media/image22.png){width="4.90625in"
height="0.4479166666666667in"}을 통해서

127.3061±3.057\*2.168이다. 따라서 구간은 (120.68,133.93)이다.

**7) 결론 및 제안**

실험을 직접 설계해보면서 인자를 선택하는 것이 중요하다는 생각이 들었다.
인자를 어떻게 설정해야 우리가 설정한 목표에 도달할 수 있을지 많은 고민을
하게 되었고, 최종적으로 설계한 인자와 실험의 값들을 가지고 데이터를
분석해 보았다. 우선 우리는 특성치를 '인식 가능한 거리'로 정했기 때문에,
초기 인자를 고려해볼 때 QR코드의 각도 별, QR코드의 밝기 별, 휴대폰 기종
별 구분 뿐 아니라, 카메라 전후면 구분도 생각해보았다. 하지만, 일반적으로
모든 스마트폰은 전면 카메라가 후면 카메라보다 성능이 떨어지기 때문에 이
부분은 실험 인자에서 제외되었다. 따라서 우리는 QR코드의 각도 별,
QR코드의 밝기 별, 휴대폰 기종 별로 구분하여 인자를 세가지로 설정했다.

이번 실험에서의 변인 통제 요소들은 다음과 같다. 우선, 미세한 빛의
차이에서도 결과값에 영향이 있을 수 있으므로, 실험은 오후 3시에 빠르게
진행하려고 노력하였고, 형광등 조명과 복도의 조명을 실험시간 동안
동일하게 유지하였다. 추가적으로, 실험하는데 있어서 햇빛에 의한 빛 반사가
결과에 영향을 미치는 것을 방지하기 위해 큰 암막 스크린으로 화면 주변의
빛을 차단해 주었다. 하지만, 완전한 암실로 환경을 만들 수 없었기 때문에
빛 반사를 통제하는데 어려움이 있어 아쉬웠다. 이 부분을 확실하게 통제 할
수 있었다면, 실험에 보다 더 정확한 결과값을 얻을 수 있었을 것이다.
그리고 QR 코드를 측정하는데 있어서 사람의 손으로 핸드폰을 붙잡고
있으므로 코드를 인식해내는 핸드폰 화면의 기울기와 높이, QR코드를 띄운
노트북 화면과의 각도가 완전히 같지 않을 수 있다고 생각했다. 이를
방지하기 위해 각도기 어플리케이션을 사용했지만 아무래도 노트북 화면과
핸드폰 카메라에 서로 영향을 주는 각도가 수치화 되어 정확히 나타나지는
않았기 때문에 변인을 통제하기 위한 노력에도 불구하고, 완벽하게 통제하기
어려웠다고 생각한다. 그리고 QR 코드 측정 시 핸드폰과 노트북 사이 거리를
정확히 측정함에 있어서, 줄자가 소숫점 첫째 자리까지만 나와있었기 때문에
보다 정밀한 결과값을 얻기 힘들었고, 줄자의 눈금을 육안으로 해석했기
때문에 매우 정확한 결과값을 알게 된 것은 아니었다고 생각한다.

각 인자에 대한 실험 결과를 해석해보면 인자A(각도)가 작아질수록 최대 인식
거리가 증가하는 경향이 있으며, 인자B(밝기)가 100, 0, 50 순으로 최대 인식
거리 거리가 증가하였다. 또한 인자C(기종)의 경우 LG, 갤럭시, 아이폰
순으로 최대 인식 거리가 증가하였다. 각 인자에 대해서 이러한 결과를
해석해보자면 인자A(각도)의 경우 각도에 따라 QR코드가 카메라에 담기지
않는 경우가 발생하거나 빛 반사가 생김으로써 QR코드 인식에 방해에 따라
최대 인식 거리에 영향을 미쳤다고 예상할 수 있고 인자B(밝기)의 경우도
주변 환경에 따라서 빛이 약하거나 너무 강할경우에는 오히려 인식에 방해가
생겨서 최대 인식 거리가 줄어들었음을 확인할 수 있었다. 인자C(기종)또한
기종 간의 성능 차이가 존재하기 때문에 휴대폰 성능에 따라서 최대 인식
거리가 결과와 같이 차이가 남을 알 수 있었다. 하지만 각 인자뿐만 아니라
교호작용 AxB가 유효하기 때문에 모든 인자A(각도)와 인자B(밝기)에 대하여
동일한 추세를 보이는 것은 아니었다. 인자B(밝기)에 관한 실험 결과에서
수준 0, 50에 대해서는 각도가 줄어들수록 최대 인식 거리가 증가하는 것을
확인할 수 있지만, 수준 100에서는 다른 결과를 보이는 것을 확인할 수
있었다. 인자B(밝기)의 수준 100에서는 각도가 0, 60, 30 순으로 최대 인식
거리가 증가하였다. 이러한 차이는 앞선 인자A(각도)와 인자B(밝기)의 수준에
따른 결과 값을 예측할 때 주변 환경으로 인한 빛반사 등이 최대 인식 거리에
영향을 미치므로 A와 B의 조합에 의한 빛반사를 추가적으로 고려해주어야하며
B인자 수준 100에서 조합에 의한 결과 값의 추세가 달랐을 것이라고 분석을
통해서 결론내릴 수 있었다. 최종적으로 분산분석을 통해 얻은 결과와 앞서
정리한 데이터들을 토대로 이번 실험에서는 인자A(각도): 0 인자B(밝기): 50,
인자C(기종): 아이폰 실험 값이 가장 최적의 조합이라는 것을 알 수 있었다.

앞선 실험 결과를 통해, QR코드의 활용을 제안해본다면 QR코드 인식율을
고려하여 보다 정확한 실내 측위 기술 개발에 이용할 수 있을 것이다. 현재
많은 기업 들에서 실내 측위 기술로 여러 기술들을 응용하고 있는 추세이다.
그중 가장 많이 시도되고 있는 기술은 객체 탐지 기술이지만 많은 학습
데이터가 요구되는 등 몇 가지 치명적인 단점이 존재하여 상용화하지 못하고
있다. 객체 탐지 기술과 QR코드를 적용시켜서 네비게이션 등의 기능을
재설계해볼 수 있다. QR 코드에는 방향을 알 수 있는, 위치 검출 패턴과
얼라이먼트 패턴이 존재한다. 이외에도 QR 코드 내에는 많은 정보를 담을 수
있기 때문에 이런 특성과 실험 결과를 이용한다면 더욱 정교한 실내 측위
기술로써 응용할 수 있을 것이다.
